<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal | NextGen ERP</title>
    <title>Student Portal | NextGen ERP</title>
    <!-- Premium Theme -->
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/premium_modal.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Overrides specific to Student Profile Layout */
        .profile-card {
            text-align: center;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .info-row span:last-child {
            color: white;
            font-weight: 600;
        }
    </style>
</head>

<body>
    <div class="dashboard-bg"></div>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="dash-sidebar">
            <div class="dash-brand">
                <span>üéì</span> STUDENT
            </div>

            <div class="dash-nav">
                <a href="#" class="dash-item active">üìä My Dashboard</a>
                <a href="#" class="dash-item">üìÖ Timetable</a>
                <a href="#" class="dash-item">üìö Assignments</a>
                <a href="#" class="dash-item">üí∞ Fee Status</a>
                <a href="#" class="dash-item">üìñ Library</a>

                <div style="margin-top: auto;">
                    <button onclick="logout()" class="dash-item" style="width: 100%; text-align: left; color: #f87171;">
                        üö™ Logout
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dash-main">
            <header class="dash-header">
                <h2 style="font-size: 1.2rem; color: white;">Student Portal</h2>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <div style="text-align: right;">
                        <div id="studentName" style="color: white; font-weight: 600; font-size: 0.9rem;">Loading...
                        </div>
                        <div id="studentGrade" style="color: #94a3b8; font-size: 0.8rem;">Class ...</div>
                    </div>
                </div>
            </header>

            <div class="dash-content">
                <div style="display: grid; grid-template-columns: 300px 1fr; gap: 20px;">

                    <!-- Left: Profile -->
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div class="profile-card">
                            <div
                                style="width: 80px; height: 80px; background: #3b82f6; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 15px; color: white;">
                                üéì</div>
                            <h3 id="profileName" style="color: white; margin-bottom: 5px;">Student</h3>
                            <p id="profileId" style="color: #64748b; font-size: 0.85rem;">ID: ...</p>

                            <div style="margin-top: 20px; text-align: left;">
                                <div class="info-row"><span>Roll No</span> <span id="rollNo">...</span></div>
                                <div class="info-row"><span>Class</span> <span id="className">...</span></div>
                                <div class="info-row"><span>DOB</span> <span id="dob">...</span></div>
                                <div class="info-row"><span>Contact</span> <span id="contact">...</span></div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-label">Overall Attendance</div>
                            <div class="kpi-value" id="attendancePercent">0%</div>
                            <div class="kpi-trend">
                                <div
                                    style="width: 100%; height: 6px; background: #334155; border-radius: 3px; margin-top: 5px; overflow: hidden;">
                                    <div id="attendanceBar" style="width: 0%; height: 100%; background: #10b981;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Details -->
                    <div style="display: flex; flex-direction: column; gap: 20px;">

                        <!-- Notifications -->
                        <div id="notificationsContainer"
                            style="background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155;">
                            <h3 style="color: white; font-size: 1.1rem; margin-bottom: 15px;">üì¢ Notice Board</h3>
                            <div id="notificationList">
                                <p class="text-muted">No new notifications.</p>
                            </div>
                        </div>

                        <!-- Fee Status -->
                        <div
                            style="background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h3 style="color: white; font-size: 1.1rem;">üí∞ Fee Status</h3>
                                <div id="totalDueBadge" class="status-badge status-success">No Dues</div>
                            </div>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Description</th>
                                        <th>Due Date</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="feeTableBody">
                                    <!-- JS populated -->
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Payment Options Row -->
            <div style="margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Bank Details Manual Option -->
                <div style="background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155;">
                    <h3 style="color: white; font-size: 1.1rem; margin-bottom: 15px;">üè¶ Bank Transfer (NEFT/IMPS)</h3>
                    <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.6;">
                        <p><strong>Bank Name:</strong> Canara Bank</p>
                        <p><strong>Account Name:</strong> Institute Management</p>
                        <p><strong>Account No:</strong> <span
                                style="background: #334155; padding: 2px 6px; border-radius: 4px; color: #fff; font-weight: bold;">4949120000179</span>
                        </p>
                        <p><strong>IFSC Code:</strong> <span
                                style="background: #334155; padding: 2px 6px; border-radius: 4px; color: #fff; font-weight: bold;">CNRB0004949</span>
                        </p>
                    </div>
                    <div
                        style="margin-top: 15px; color: #10b981; font-size: 0.8rem; background: rgba(16, 185, 129, 0.1); padding: 10px; border-radius: 6px; border: 1px solid rgba(16, 185, 129, 0.2);">
                        ‚ö° <strong>Auto-Verification System Active</strong><br>
                        System will auto-match your payment with bank records via UTR.
                    </div>
                </div>

                <!-- Manual QR Option -->
                <div
                    style="background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155; text-align: center;">
                    <h3 style="color: white; font-size: 1.1rem; margin-bottom: 15px;">üì± Scan & Pay (UPI)</h3>
                    <img src="/static/img/upi_qr.jpg" alt="Institute UPI QR"
                        style="width: 150px; border-radius: 8px; border: 4px solid white;">
                    <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 10px;">
                        Scan with GPay / PhonePe / Paytm.<br>
                        <span style="color: #f59e0b;">Important: Enter the correct Transaction ID/UTR below for instant
                            approval.</span>
                    </p>
                </div>
            </div>

    </div>
    </main>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/dashboard/student.js"></script>
    <script>
        function logout() {
            localStorage.clear();
            window.location.href = '/';
        }
    </script>
</body>

</html>