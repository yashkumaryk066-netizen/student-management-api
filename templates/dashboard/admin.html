<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Institute Management</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo-section">
                <h2>üéì IMS</h2>
                <p>Admin Panel</p>
            </div>

            <nav class="nav-menu">
                <a href="#dashboard" class="nav-item active" onclick="showSection('dashboard')">
                    <span>üìä</span> Dashboard
                </a>
                <a href="#students" class="nav-item" onclick="showSection('students')">
                    <span>üë•</span> Students
                </a>
                <a href="#attendance" class="nav-item" onclick="showSection('attendance')">
                    <span>üìù</span> Attendance
                </a>
                <a href="#payments" class="nav-item" onclick="showSection('payments')">
                    <span>üí∞</span> Payments
                </a>
                <a href="#notifications" class="nav-item" onclick="showSection('notifications')">
                    <span>üì¢</span> Notifications
                </a>
                <a href="#reports" class="nav-item" onclick="showSection('reports')">
                    <span>üìà</span> Reports
                </a>
            </nav>

            <div class="sidebar-footer">
                <button onclick="logout()" class="logout-btn">
                    üö™ Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- 3D Institute Header -->
            <div class="institute-header">
                <div class="institute-branding">
                    <h1>Saraswati Institute of Technology</h1>
                    <p>Administration Panel | Central Command</p>
                </div>
                <div class="user-info">
                    <span id="userName" style="color: rgba(255,255,255,0.9);">Admin</span>
                    <div class="avatar" style="border: 2px solid rgba(255,255,255,0.5);">A</div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <h3 id="totalStudents">0</h3>
                            <p>Total Students</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <h3 id="presentToday">0</h3>
                            <p>Present Today</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <h3 id="totalRevenue">‚Çπ0</h3>
                            <p>Total Revenue</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-content">
                            <h3 id="pendingPayments">0</h3>
                            <p>Pending Payments</p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h2>Recent Activity</h2>
                    <div id="recentActivityList" class="activity-list">
                        <p class="text-muted">Loading...</p>
                    </div>
                </div>
            </section>

            <!-- Students Section -->
            <section id="students-section" class="content-section">
                <div class="section-header">
                    <button onclick="showAddStudentForm()" class="btn btn-primary">+ Add Student</button>
                    <input type="text" id="studentSearch" placeholder="Search students..." class="search-input">
                </div>

                <div id="addStudentForm" class="modal" style="display: none;">
                    <div class="modal-content">
                        <span class="close" onclick="hideAddStudentForm()">&times;</span>
                        <h2>Add New Student</h2>
                        <form id="studentForm" onsubmit="handleAddStudent(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>First Name *</label>
                                    <input type="text" name="first_name" required>
                                </div>
                                <div class="form-group">
                                    <label>Last Name *</label>
                                    <input type="text" name="last_name" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" name="email">
                                </div>
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="tel" name="phone">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Gender *</label>
                                    <select name="gender" required>
                                        <option value="">Select...</option>
                                        <option value="M">Male</option>
                                        <option value="F">Female</option>
                                        <option value="O">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Date of Birth</label>
                                    <input type="date" name="date_of_birth">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <textarea name="address" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="button" onclick="hideAddStudentForm()"
                                    class="btn btn-secondary">Cancel</button>
                                <button type="submit" class="btn btn-primary">Add Student</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Gender</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <tr>
                                <td colspan="6" class="text-center">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Attendance Section -->
            <section id="attendance-section" class="content-section">
                <div class="section-header">
                    <h2>Mark Attendance</h2>
                    <input type="date" id="attendanceDate" class="date-input" value="">
                </div>

                <div class="attendance-grid" id="attendanceGrid">
                    <p class="text-muted">Loading students...</p>
                </div>

                <button onclick="submitAttendance()" class="btn btn-primary" style="margin-top: 20px;">
                    Save Attendance
                </button>
            </section>

            <!-- Payments Section -->
            <section id="payments-section" class="content-section">
                <div class="section-header">
                    <h2>Payment Management</h2>
                    <button onclick="showAddPaymentForm()" class="btn btn-primary">+ Add Payment</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Due Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="paymentsTableBody">
                            <tr>
                                <td colspan="5" class="text-center">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Notifications Section -->
            <section id="notifications-section" class="content-section">
                <div class="section-header">
                    <h2>Send Notification</h2>
                </div>

                <div class="notification-form-container">
                    <form id="notificationForm" onsubmit="handleSendNotification(event)">
                        <div class="form-group">
                            <label>Target Audience *</label>
                            <select name="target_role" required>
                                <option value="ALL">Everyone</option>
                                <option value="STUDENT">Students</option>
                                <option value="TEACHER">Teachers</option>
                                <option value="PARENT">Parents</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Message *</label>
                            <textarea name="message" rows="5" required
                                placeholder="Type your message here..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Send Notification</button>
                    </form>
                </div>

                <div class="recent-notifications">
                    <h3>Recent Notifications</h3>
                    <div id="notificationsList">
                        <p class="text-muted">Loading...</p>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports-section" class="content-section">
                <h2>Reports & Analytics</h2>
                <div class="reports-grid">
                    <div class="report-card">
                        <h3>üìä Attendance Report</h3>
                        <p>View student attendance statistics</p>
                        <button class="btn btn-secondary">Generate Report</button>
                    </div>
                    <div class="report-card">
                        <h3>üí∞ Payment Report</h3>
                        <p>Fee collection and pending dues</p>
                        <button class="btn btn-secondary">Generate Report</button>
                    </div>
                    <div class="report-card">
                        <h3>üë• Student Report</h3>
                        <p>Complete student data export</p>
                        <button class="btn btn-secondary">Generate Report</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/dashboard/admin.js"></script>
</body>

</html>