{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y.S.M Advance Education | Enterprise Education Management System</title>
    <link rel="icon" type="image/png" href="{% static 'img/ysm_logo.png' %}">
    <link rel="shortcut icon" href="{% static 'img/ysm_logo.png' %}">
    <link rel="apple-touch-icon" href="{% static 'img/ysm_logo.png' %}">

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@700&display=swap"
        rel="stylesheet">

    <!-- Premium Modal CSS -->
    <link rel="stylesheet" href="{% static 'css/premium_modal.css' %}">

    <!-- Cinematic Motion Engine -->
    <link rel="stylesheet" href="{% static 'css/premium_motion.css' %}">
    <script src="https://unpkg.com/lenis@1.1.13/dist/lenis.min.js"></script>
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>

    <!-- Three.js for 3D Effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --accent: #06b6d4;
            --bg-dark: #02040a;
            --bg-surface: #0a0e27;
            --text: #f8fafc;
            --text-muted: #94a3b8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            overflow-x: hidden;
            position: relative;
        }

        /* ==== PREMIUM LOADING SCREEN ==== */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #02040a 0%, #0a0e27 100%);
            z-index: 99999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        #preloader.fade-out {
            opacity: 0;
            transform: scale(1.1);
            pointer-events: none;
        }

        .loader-logo {
            font-size: 3rem;
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
        }

        .loader-text {
            font-family: 'Space Grotesk', monospace;
            font-size: 0.9rem;
            color: var(--text-muted);
            letter-spacing: 4px;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .loader-bar {
            width: 300px;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loader-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            animation: loadProgress 2s ease-in-out forwards;
            box-shadow: 0 0 20px var(--primary);
        }

        @keyframes loadProgress {
            to {
                width: 100%;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        /* ==== BACKGROUND CANVAS ==== */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.5;
        }

        /* ==== NAVBAR ==== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 60px;
            background: rgba(2, 4, 10, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 800;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Space Grotesk', sans-serif;
        }

        .logo span:first-child {
            font-size: 1.8rem;
            filter: drop-shadow(0 0 10px var(--primary));
        }

        .nav-links {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
            box-shadow: 0 0 10px var(--primary);
        }

        .nav-link:hover {
            color: white;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .btn-login {
            padding: 12px 28px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.6);
        }

        /* ==== HERO SECTION ==== */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 120px 60px 60px;
            position: relative;
            overflow: hidden;
        }

        /* 3D Floating Grid Background */
        .grid-3d {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(99, 102, 241, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.05) 1px, transparent 1px);
            background-size: 80px 80px;
            transform: perspective(500px) rotateX(60deg);
            transform-origin: center top;
            opacity: 0.3;
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1.1fr 1fr;
            gap: 80px;
            align-items: center;
            z-index: 10;
            position: relative;
        }

        .hero-left {
            position: relative;
            z-index: 5;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 30px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 30px;
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(1.3);
            }
        }

        h1 {
            font-size: clamp(3rem, 6vw, 5.5rem);
            line-height: 1.1;
            font-weight: 900;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #ffffff 0%, #818cf8 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
        }

        .hero-description {
            font-size: 1.25rem;
            color: var(--text-muted);
            line-height: 1.8;
            margin-bottom: 40px;
            max-width: 600px;
        }

        /* Hero Actions */
        .hero-buttons {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            margin: 50px 0;
            position: relative;
            z-index: 100;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .btn-premium {
            padding: 20px 45px;
            border-radius: 16px;
            font-weight: 800;
            font-size: 1rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white !important;
            min-width: 240px;
            opacity: 1 !important;
            visibility: visible !important;
        }

        /* Get Started - Cyber Blue */
        .btn-call-to-action {
            background: linear-gradient(135deg, #6366f1 0%, #4338ca 100%) !important;
            box-shadow: 0 10px 40px -10px rgba(99, 102, 241, 0.6);
        }

        .btn-call-to-action:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 60px -15px rgba(99, 102, 241, 0.8);
        }

        /* Live Demo - Glass */
        .btn-demo-action {
            background: rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
        }

        .btn-demo-action:hover {
            background: rgba(255, 255, 255, 0.2) !important;
            border-color: rgba(255, 255, 255, 0.5) !important;
            transform: translateY(-8px) scale(1.05);
        }

        /* Developer - Emerald Glow */
        .btn-dev-action {
            background: rgba(16, 185, 129, 0.1) !important;
            border: 1px solid rgba(16, 185, 129, 0.5) !important;
            color: #34d399 !important;
        }

        .btn-dev-action:hover {
            background: rgba(16, 185, 129, 0.2) !important;
            border-color: #10b981 !important;
            transform: translateY(-8px) scale(1.05);
        }

        .btn-premium .icon-pulse {
            animation: iconPulse 2s infinite;
        }

        @keyframes iconPulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
        }

        /* Premium Pricing Section */
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            padding-top: 20px;
            align-items: stretch;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .pricing-card {
            background: rgba(15, 23, 42, 0.7) !important;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            border-radius: 32px;
            padding: 60px 40px;
            position: relative;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            height: 100%;
        }

        .pricing-card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 2px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }

        .pricing-card:hover {
            transform: translateY(-20px) scale(1.02);
            background: rgba(30, 41, 59, 0.8) !important;
            border-color: rgba(99, 102, 241, 0.5) !important;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.6), 0 0 30px rgba(99, 102, 241, 0.2);
        }

        .pricing-card.featured {
            background: rgba(30, 27, 75, 0.6) !important;
            border: 2px solid #6366f1 !important;
            box-shadow: 0 30px 70px rgba(99, 102, 241, 0.25);
        }

        .pricing-card.featured::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
            pointer-events: none;
        }

        .pricing-card.featured:hover {
            transform: scale(1.08) translateY(-15px);
            box-shadow: 0 30px 60px rgba(99, 102, 241, 0.2);
        }

        .featured-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #6366f1;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 800;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .price-tag {
            font-size: 4rem !important;
            font-weight: 900 !important;
            margin: 20px 0;
            letter-spacing: -3px;
            background: linear-gradient(to bottom, #fff, #94a3b8);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: baseline;
            gap: 5px;
        }

        .featured .price-tag {
            background: linear-gradient(to bottom, #fff, #818cf8);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .price-tag span {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 400;
            letter-spacing: 0;
        }

        .pricing-features {
            list-style: none;
            padding: 0;
            margin: 30px 0 40px;
            flex-grow: 1;
        }

        .pricing-features li {
            padding: 12px 0;
            color: rgba(255, 255, 255, 0.8) !important;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .pricing-features li::before {
            content: '‚úì';
            color: #6366f1;
            font-weight: 900;
        }

        .btn-pricing {
            width: 100%;
            padding: 22px !important;
            border-radius: 18px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            border: none;
            font-size: 1.1rem !important;
            position: relative;
            z-index: 10;
        }

        .btn-pricing-secondary {
            background: rgba(255, 255, 255, 0.08) !important;
            color: white !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .btn-pricing-secondary:hover {
            background: rgba(255, 255, 255, 0.15) !important;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            border-color: #6366f1 !important;
        }

        .btn-pricing-primary {
            background: linear-gradient(135deg, #6366f1, #4f46e5) !important;
            color: white !important;
            box-shadow: 0 15px 35px rgba(99, 102, 241, 0.4);
        }

        .btn-pricing-primary:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(99, 102, 241, 0.6);
            filter: brightness(1.1);
        }

        .btn-pricing-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(99, 102, 241, 0.6);
            background: #4f46e5;
        }

        /* Stats Counter */
        .stats {
            display: flex;
            gap: 50px;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(to bottom, #fff, #818cf8);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ==== 3D HOLOGRAPHIC VISUALIZATION ==== */
        .hero-right {
            position: relative;
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeInRight 1s ease-out 0.3s backwards;
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(40px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .hologram {
            position: relative;
            width: 500px;
            height: 500px;
            transform-style: preserve-3d;
            animation: holoRotate 20s linear infinite;
        }

        @keyframes holoRotate {
            from {
                transform: rotateY(0deg);
            }

            to {
                transform: rotateY(360deg);
            }
        }

        .holo-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid;
            border-radius: 50%;
            opacity: 0.4;
        }

        .ring-1 {
            width: 400px;
            height: 400px;
            border-color: var(--primary);
            animation: ringPulse 3s ease-in-out infinite;
        }

        .ring-2 {
            width: 300px;
            height: 300px;
            border-color: var(--secondary);
            animation: ringPulse 3s ease-in-out infinite 0.5s;
        }

        .ring-3 {
            width: 200px;
            height: 200px;
            border-color: var(--accent);
            animation: ringPulse 3s ease-in-out infinite 1s;
        }

        @keyframes ringPulse {

            0%,
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.3;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 0.6;
            }
        }

        .holo-core {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--primary), transparent);
            border-radius: 50%;
            box-shadow: 0 0 60px var(--primary);
            animation: coreGlow 2s ease-in-out infinite;
        }

        @keyframes coreGlow {

            0%,
            100% {
                box-shadow: 0 0 60px var(--primary);
            }

            50% {
                box-shadow: 0 0 100px var(--primary);
            }
        }

        /* Floating Data Points */
        .data-point {
            position: absolute;
            padding: 10px 16px;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
        }

        .dp-1 {
            top: 10%;
            left: 10%;
            animation: floatPoint 4s ease-in-out infinite;
        }

        .dp-2 {
            top: 70%;
            right: 10%;
            animation: floatPoint 4s ease-in-out infinite 1s;
        }

        .dp-3 {
            bottom: 10%;
            left: 20%;
            animation: floatPoint 4s ease-in-out infinite 2s;
        }

        @keyframes floatPoint {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        @media (max-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .hero-right {
                height: 400px;
            }

            .hologram {
                width: 300px;
                height: 300px;
            }

            h1 {
                font-size: 2.5rem;
            }

            .navbar {
                padding: 15px 20px;
            }

            .nav-links {
                gap: 20px;
            }
        }

        /* Feature Bento Grid */
        .features-section {
            padding: 100px 60px;
            position: relative;
            z-index: 10;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-header h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #fff, #818cf8);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        .bento-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .bento-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            transition: 0.4s;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .bento-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .bento-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, transparent 100%);
            pointer-events: none;
        }

        .bento-card.large {
            grid-column: span 2;
        }

        .bento-card.tall {
            grid-row: span 2;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.05);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .bento-card h3 {
            font-size: 1.4rem;
            color: white;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .bento-card p {
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        @media (max-width: 1024px) {
            .bento-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .bento-card.large,
            .bento-card.tall {
                grid-column: span 1;
                grid-row: span 1;
            }
        }

        @media (max-width: 768px) {
            .bento-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Premium Loading Screen -->
    <div id="preloader">
        <div class="loader-logo">üéì</div>
        <div class="loader-text">INITIALIZING SYSTEM</div>
        <div class="loader-bar">
            <div class="loader-progress"></div>
        </div>
    </div>

    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>

    <div id="smooth-wrapper">
        <div id="smooth-content">

            <!-- Navigation -->
            <nav class="navbar">
                <a href="#" class="logo">
                    <span>üéì</span>
                    <div>
                        <div>NEXTGEN ERP</div>
                        <a href="/api/developer/"
                            style="font-size: 0.75rem; color: var(--primary); font-weight: 700; text-decoration: none; letter-spacing: 1px; display: block; margin-top: 2px; transition: all 0.3s;"
                            onmouseover="this.style.textShadow='0 0 10px var(--primary)'"
                            onmouseout="this.style.textShadow='none'">
                            BY YASH A MISHRA <span style="font-size: 0.8em;">‚Üó</span>
                        </a>
                    </div>
                </a>
                <div class="nav-links">
                    <a href="#modules" class="nav-link">Modules</a>
                    <a href="#developer" class="nav-link">Meet Developer</a>
                    <a href="#pricing" class="nav-link">Pricing</a>
                    <!-- API Link Hidden -->
                    <button class="btn-login" onclick="window.location.href='/login/'">ACCESS PORTAL</button>
                </div>
            </nav>

            <!-- Hero Section -->
            <section class="hero">
                <div class="grid-3d"></div>
                <div class="hero-content">
                    <div class="hero-left">
                        <div class="badge">
                            <span class="pulse-dot"></span>
                            SYSTEM ONLINE
                        </div>
                        <h1>The Complete Operating System for Education</h1>
                        <p class="hero-description">
                            Transform your institution with Y.S.M Advance Education ‚Äî the most comprehensive education
                            management platform.
                            Built for modern schools, colleges, and universities.
                        </p>
                        <div class="hero-buttons">
                            <button class="btn-premium btn-call-to-action" onclick="window.location.href='/login/'">
                                <span>GET STARTED</span>
                                <svg class="icon-pulse" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="3" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </button>
                            <button class="btn-premium btn-demo-action" onclick="window.location.href='/demo/'">
                                <span>LIVE DEMO</span>
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                </svg>
                            </button>
                            <button class="btn-premium btn-pricing-action" onclick="window.lenis.scrollTo('#pricing')"
                                style="background: linear-gradient(135deg, #10b981, #059669) !important; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4) !important;">
                                <span>BUY NOW</span>
                                <span style="font-size: 1.2rem;">üí∞</span>
                            </button>
                            <button class="btn-premium btn-dev-action" onclick="window.lenis.scrollTo('#developer')">
                                <span>MEET DEVELOPER</span>
                                <span style="font-size: 1.5rem;">üë®‚Äçüíª</span>
                            </button>
                        </div>
                        <div class="stats">
                            <div class="stat-item">
                                <div class="stat-number">50+</div>
                                <div class="stat-label">Modules</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">99.9%</div>
                                <div class="stat-label">Uptime</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">24/7</div>
                                <div class="stat-label">Support</div>
                            </div>
                        </div>
                    </div>
                    <div class="hero-right">
                        <div class="hologram">
                            <div class="holo-ring ring-1"></div>
                            <div class="holo-ring ring-2"></div>
                            <div class="holo-ring ring-3"></div>
                            <div class="holo-core"></div>
                            <div class="data-point dp-1">Students: 1542</div>
                            <div class="data-point dp-2">Revenue: +12%</div>
                            <div class="data-point dp-3">Staff: 120</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Modules Section -->
            <section id="modules" class="features-section reveal-section">
                <div class="section-header">
                    <div class="badge">
                        <span class="pulse-dot"></span>
                        POWERFUL FEATURES
                    </div>
                    <h2>Enterprise Modules</h2>
                    <p style="color: var(--text-muted); max-width: 600px; margin: 0 auto;">Everything you need to manage
                        your
                        institution efficiently in one unified platform.</p>
                </div>

                <div class="bento-grid">
                    <!-- Academics -->
                    <div class="bento-card large">
                        <div class="card-icon">üìö</div>
                        <h3>Academics & Exams</h3>
                        <p>Complete examination management, grading systems, automated report cards (GPA/CGPA), and
                            smart
                            timetable scheduling with conflict detection.</p>
                    </div>

                    <!-- Finance -->
                    <div class="bento-card">
                        <div class="card-icon">üí∞</div>
                        <h3>Finance & Payroll</h3>
                        <p>Fee collection, automated receipts, staff payroll processing, expense tracking, and financial
                            auditing reports.</p>
                    </div>

                    <!-- Library -->
                    <div class="bento-card">
                        <div class="card-icon">üìñ</div>
                        <h3>Digital Library</h3>
                        <p>LMS for book issue/returns, digital catalog, fine calculation, and ebook management support.
                        </p>
                    </div>

                    <!-- HR -->
                    <div class="bento-card tall">
                        <div class="card-icon">üë•</div>
                        <h3>HR Management</h3>
                        <p>Staff attendance, leave management, recruitment portal, and performance appraisal systems.
                            Track
                            every employee's lifecycle from hiring to retiring.</p>
                    </div>

                    <!-- Transport -->
                    <div class="bento-card large">
                        <div class="card-icon">üöå</div>
                        <h3>Transport & GPS</h3>
                        <p>Real-time bus tracking, route optimization, driver management, and parent alerts. Ensure
                            student
                            safety with live location updates.</p>
                    </div>

                    <!-- Hostel -->
                    <div class="bento-card">
                        <div class="card-icon">üè®</div>
                        <h3>Smart Hostel</h3>
                        <p>Room allocation, mess management, gate pass system, and biometric attendance integration.</p>
                    </div>
                </div>
            </section>

            <!-- MEET DEVELOPER SECTION (PREMIUM ADDITION) -->
            <section id="developer" class="reveal-section"
                style="padding: 100px 60px; background: linear-gradient(to bottom, #02040a, #0a0e27);">
                <div
                    style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1.2fr; gap: 80px; align-items: center;">
                    <div class="developer-visual" style="perspective: 1000px;">
                        <div class="dev-card-premium"
                            style="background: rgba(15, 23, 42, 0.8); border: 1px solid var(--primary); border-radius: 30px; padding: 40px; text-align: center; backdrop-filter: blur(20px); transform-style: preserve-3d; transition: all 0.5s;">
                            <div class="dev-avatar-container"
                                style="width: 200px; height: 200px; margin: 0 auto 30px; border-radius: 50%; padding: 6px; background: linear-gradient(45deg, var(--primary), var(--secondary)); box-shadow: 0 0 40px rgba(99, 102, 241, 0.4);">
                                <img src="{% static 'images/yash_profile.jpg' %}" alt="Yash A Mishra"
                                    style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 4px solid #0f172a;">
                            </div>
                            <h3
                                style="font-size: 2rem; color: white; margin-bottom: 10px; font-family: 'Space Grotesk';">
                                Yash A Mishra</h3>
                            <div
                                style="color: var(--primary); font-weight: 700; text-transform: uppercase; letter-spacing: 2px; font-size: 0.85rem; margin-bottom: 20px;">
                                Chief Architect</div>
                            <div style="display: flex; justify-content: center; gap: 15px;">
                                <a href="https://www.linkedin.com/in/yash-kumar-342330213" target="_blank"
                                    style="color: white; font-size: 1.2rem;"><i class="fab fa-linkedin"></i></a>
                                <a href="https://github.com" target="_blank" style="color: white; font-size: 1.2rem;"><i
                                        class="fab fa-github"></i></a>
                            </div>
                        </div>
                    </div>

                    <div class="developer-info">
                        <div class="badge">
                            <span class="pulse-dot"></span>
                            THE ARCHITECT
                        </div>
                        <h2
                            style="font-size: 3.5rem; margin-bottom: 25px; background: linear-gradient(to right, #fff, #818cf8); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                            Y.S.M ADVANCE EDUCATION SYSTEM</h2>
                        <p style="color: var(--text-muted); font-size: 1.2rem; line-height: 1.8; margin-bottom: 30px;">
                            "The mission was simple: Build a system that doesn't just manage data, but empowers
                            institutions to reach their full potential. Y.S.M Advance is the result of years of
                            architecting scalable enterprise solutions."
                        </p>
                        <div style="display: flex; gap: 20px;">
                            <a href="/api/developer/" class="btn-premium btn-call-to-action"
                                style="min-width: auto; padding: 15px 30px;">
                                VIEW FULL PROFILE
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pricing Section -->
            <section id="pricing" class="reveal-section" style="padding: 100px 60px; background: #02040a;">
                <div style="max-width: 1200px; margin: 0 auto;">
                    <div style="text-align: center; margin-bottom: 80px;">
                        <div class="badge">
                            <span class="pulse-dot"></span>
                            FLEXIBLE PLANS
                        </div>
                        <h2 style="font-size: 3rem; margin-bottom: 20px;">Simple, Transparent Pricing</h2>
                        <p style="color: var(--text-muted); max-width: 600px; margin: 0 auto;">
                            Choose the perfect plan for your institution. Instant activation upon secure payment.
                        </p>
                    </div>

                    <div class="pricing-grid">
                        <!-- Coaching Plan -->
                        <div class="pricing-card">
                            <h3 style="font-size: 1.5rem; margin-bottom: 10px; color: white;">Coaching Center</h3>
                            <div class="price-tag">‚Çπ500<span>/month</span></div>
                            <ul class="pricing-features">
                                <li>Up to 100 Students</li>
                                <li>Attendance & Batches</li>
                                <li>Basic Reports</li>
                                <li>Email Support</li>
                            </ul>
                            <button class="btn-pricing btn-pricing-secondary"
                                onclick="openPaymentModal('Coaching Center', 500)">
                                BUY NOW
                            </button>
                        </div>

                        <!-- School Plan -->
                        <div class="pricing-card featured">
                            <div class="featured-badge">MOST POPULAR</div>
                            <h3 style="font-size: 1.5rem; margin-bottom: 10px; color: white;">Modern School</h3>
                            <div class="price-tag">‚Çπ2,000<span>/month</span></div>
                            <ul class="pricing-features">
                                <li style="color: white !important;">Unlimited Students</li>
                                <li style="color: white !important;">Exam & Grading System</li>
                                <li style="color: white !important;">ID Card Generation</li>
                                <li style="color: white !important;">Transport Management</li>
                                <li style="color: white !important;">Priority Support</li>
                            </ul>
                            <button class="btn-pricing btn-pricing-primary" onclick="openPaymentModal('School', 2000)">
                                BUY NOW
                            </button>
                        </div>

                        <!-- Institute Plan -->
                        <div class="pricing-card">
                            <h3 style="font-size: 1.5rem; margin-bottom: 10px; color: white;">Institute / University
                            </h3>
                            <div class="price-tag">‚Çπ5,000<span>/month</span></div>
                            <ul class="pricing-features">
                                <li>Multi-Branch Support</li>
                                <li>HR & Payroll</li>
                                <li>Library & Hostel</li>
                                <li>Advanced Analytics</li>
                                <li>Dedicated Account Manager</li>
                            </ul>
                            <button class="btn-pricing btn-pricing-secondary"
                                onclick="openPaymentModal('Institute', 5000)">
                                BUY NOW
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Payment Modal -->
            <div id="paymentModalOverlay"
                style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); backdrop-filter:blur(5px); z-index:10000; justify-content:center; align-items:center;">
                <div id="paymentModalContent"
                    style="background: #0f172a; border: 1px solid var(--glass-border); border-radius: 20px; padding: 40px; width: 90%; max-width: 500px; position:relative; animation: fadeInUp 0.3s ease-out;">
                    <button onclick="closePaymentModal()"
                        style="position:absolute; top:20px; right:20px; background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>

                    <!-- Step 1: Account Details -->
                    <div id="step1">
                        <h3 style="margin-bottom: 10px; font-family: 'Space Grotesk';">Create Account</h3>
                        <p style="color:var(--text-muted); margin-bottom:20px;">Enter your details to proceed with
                            payment.</p>

                        <div style="margin-bottom:15px;">
                            <label style="display:block; margin-bottom:5px; color:var(--text-muted);">Email
                                Address</label>
                            <input type="email" id="userEmail" placeholder="admin@school.com"
                                style="width:100%; padding:12px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); color:white; border-radius:8px;">
                        </div>
                        <div style="margin-bottom:25px;">
                            <label style="display:block; margin-bottom:5px; color:var(--text-muted);">Mobile
                                Number</label>
                            <input type="tel" id="userPhone" placeholder="+91 98765 43210"
                                style="width:100%; padding:12px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); color:white; border-radius:8px;">
                        </div>

                        <button onclick="goToPaymentStep()" class="btn-primary" style="width:100%;">Proceed to
                            Payment</button>
                    </div>

                    <!-- Step 2: Payment Scanner -->
                    <div id="step2" style="display:none; text-align:center;">
                        <h3 style="margin-bottom: 10px; font-family: 'Space Grotesk';">Secure Payment</h3>
                        <p id="planAmountDisplay"
                            style="color:var(--primary); font-size:1.5rem; font-weight:700; margin-bottom:20px;">‚Çπ0</p>

                        <div
                            style="background:white; padding:15px; border-radius:15px; display:inline-block; margin-bottom:20px;">
                            <img src="/static/images/payment_qr.jpg" alt="Payment QR"
                                style="width:200px; height:200px; object-fit:contain;">
                        </div>

                        <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">Scan using any UPI App
                            (GPay,
                            PhonePe, Paytm)</p>

                        <div
                            style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; margin-bottom:20px; text-align:left;">
                            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                                <span style="color:var(--text-muted);">Bank Transfer (IMPS/NEFT)</span>
                            </div>
                            <div style="font-family:monospace; color:var(--text-muted); font-size:0.85rem;">
                                IFSC: CNRB0004949<br>
                                ACC: 4949120000179
                            </div>
                        </div>

                        <div id="paymentProcessing" style="display:none; color:var(--primary); margin-bottom:10px;">
                            <span class="pulse-dot"></span> Verifying Payment & Creating Account...
                        </div>

                        <button id="confirmPaymentBtn" onclick="confirmPayment()" class="btn-primary"
                            style="width:100%;">I Have
                            Paid</button>
                    </div>
                </div>
            </div>

            <!-- Razorpay SDK -->
            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

            <!-- Payment Logic Script -->
            <script>
                let selectedPlan = '';
                let selectedAmount = 0;

                function openPaymentModal(plan, amount) {
                    selectedPlan = plan;
                    selectedAmount = amount;
                    document.getElementById('planAmountDisplay').innerText = '‚Çπ' + amount.toLocaleString('en-IN');

                    // Reset modal state
                    document.getElementById('paymentModalOverlay').style.display = 'flex';
                    document.getElementById('step1').style.display = 'block';
                    document.getElementById('step2').style.display = 'none';
                }

                function closePaymentModal() {
                    document.getElementById('paymentModalOverlay').style.display = 'none';
                }

                function goToPaymentStep() {
                    const email = document.getElementById('userEmail').value;
                    const phone = document.getElementById('userPhone').value;

                    if (!email || !phone) {
                        alert('Please enter both Email and Phone Number');
                        return;
                    }
                    if (phone.length < 10) {
                        alert('Please enter a valid phone number (10 digits)');
                        return;
                    }

                    // Trigger Razorpay Payment Flow directly instead of showing QR Step
                    initiateRazorpayPayment();
                }

                async function initiateRazorpayPayment() {
                    const email = document.getElementById('userEmail').value;
                    const phone = document.getElementById('userPhone').value;
                    const btn = document.querySelector('#step1 button'); // The Proceed Button
                    btn.innerText = "Initializing Payment Gateway...";
                    btn.disabled = true;

                    try {
                        // 1. Create Order
                        const res = await fetch('/api/payment/create-order/', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ amount: selectedAmount })
                        });
                        const orderData = await res.json();

                        if (!res.ok) throw new Error(orderData.error || 'Failed to create order');

                        // CHECK FOR MOCK MODE (If real keys aren't set)
                        // Use User's Custom QR Scanner instead of generic bank
                        if (orderData.mock_order) {
                            showQRScanner(orderData);
                            return;
                        }

                        // 2. Open Razorpay Checkout (REAL MODE)
                        const options = {
                            "key": orderData.key_id,
                            "amount": orderData.amount,
                            "currency": orderData.currency,
                            "name": "IMS Premium",
                            "description": `Payment for ${selectedPlan}`,
                            "image": "https://cdn-icons-png.flaticon.com/512/2995/2995467.png",
                            "order_id": orderData.order_id,
                            "handler": function (response) {
                                verifyAndOnboard(response);
                            },
                            "prefill": {
                                "name": email.split('@')[0],
                                "email": email,
                                "contact": phone
                            },
                            "theme": { "color": "#6366f1" }
                        };

                        const rzp1 = new Razorpay(options);
                        rzp1.on('payment.failed', function (response) {
                            alert("Payment Failed: " + response.error.description);
                            btn.innerText = "Proceed to Payment";
                            btn.disabled = false;
                        });
                        rzp1.open();

                    } catch (e) {
                        console.error(e);

                        if (e.message && e.message.includes('PAYMENT_GATEWAY_NOT_CONFIGURED')) {
                            // SKIP MODAL, GO STRAIGHT TO MANUAL DATA ENTRY
                            showManualPaymentStep();
                        } else {
                            showPremiumModal({
                                title: '‚ùå Payment Error',
                                message: e.message || 'An error occurred while initializing payment. Please try again.',
                                type: 'error',
                                buttons: [{
                                    text: 'Close',
                                    class: 'btn-primary',
                                    action: closePremiumModal
                                }]
                            });
                        }

                        btn.innerText = "Proceed to Payment";
                        btn.disabled = false;
                    }
                }

                function showManualPaymentStep() {
                    // Hide Email Step
                    document.getElementById('step1').style.display = 'none';
                    // Show new QR UI in Step 2 container
                    const step2 = document.getElementById('step2');
                    step2.style.display = 'block';

                    // Generate a temporary reference ID
                    const manualOrderId = 'MANUAL-' + Date.now().toString().slice(-6);

                    step2.innerHTML = `
            <div style="text-align:center; padding: 20px;">
                <h3 style="margin-bottom:5px; font-family:'Space Grotesk'">Scan & Pay</h3>
                <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">Use any UPI App to pay securely</p>
                
                <div style="background:white; padding:15px; border-radius:15px; display:inline-block; margin-bottom:20px; box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);">
                    <img src="/static/images/payment_qr.jpg" alt="Payment QR"
                        style="width:220px; height:220px; object-fit:contain;">
                </div>
                
                <div style="margin-bottom:20px;">
                    <div style="font-size:1.5rem; font-weight:700; color:var(--primary);">‚Çπ${selectedAmount.toLocaleString('en-IN')}</div>
                    <div style="font-size:0.8rem; color:var(--text-muted);">Ref: ${manualOrderId}</div>
                </div>
                
                <div style="margin-bottom:20px; text-align:left;">
                    <label style="display:block; margin-bottom:5px; color:var(--text-muted); font-size:0.9rem;">Transaction ID / UTR (Required)</label>
                    <input type="text" id="txnUtrInput" placeholder="Enter 12-digit UTR No." maxlength="12"
                        style="width:100%; padding:12px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); color:white; border-radius:8px; font-family:monospace; letter-spacing:1px;">
                    <div id="utrError" style="color:#ef4444; font-size:0.8rem; margin-top:5px; display:none;"></div>
                </div>

                <div style="background:rgba(255,193,7,0.1); border:1px solid rgba(255,193,7,0.3); padding:10px; border-radius:8px; margin-bottom:20px; text-align:left;">
                    <p style="margin:0; color:var(--text-muted); font-size:0.8rem;">
                        <strong style="color:#ffc107;">‚ö†Ô∏è Important:</strong> Credentials will be sent to your email <strong>${document.getElementById('userEmail').value}</strong> after admin approval (1-2 hours).
                    </p>
                </div>

                <button id="verifyBtn" onclick="verifyManualPayment('${manualOrderId}')" class="btn-primary" style="width:100%; margin-bottom:10px;">
                    SUBMIT FOR VERIFICATION
                </button>
                <button onclick="location.reload()" class="btn-secondary" style="width:100%;">
                    CANCEL
                </button>
            </div>
        `;
                }

                function showQRScanner(orderData) {
                    // Hide Email Step
                    document.getElementById('step1').style.display = 'none';
                    // Show new QR UI in Step 2 container
                    const step2 = document.getElementById('step2');
                    step2.style.display = 'block';

                    step2.innerHTML = `
                <div style="text-align:center; padding: 20px;">
                    <h3 style="margin-bottom:5px; font-family:'Space Grotesk'">Scan & Pay</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">Use any UPI App to pay securely</p>
                    
                    <div style="background:white; padding:15px; border-radius:15px; display:inline-block; margin-bottom:20px; box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);">
                        <img src="/static/images/payment_qr.jpg" alt="Payment QR"
                            style="width:220px; height:220px; object-fit:contain;">
                    </div>
                    
                    <div style="margin-bottom:20px;">
                        <div style="font-size:1.5rem; font-weight:700; color:var(--primary);">‚Çπ${(orderData.amount / 100).toLocaleString('en-IN')}</div>
                        <div style="font-size:0.8rem; color:var(--text-muted);">Ref: ${orderData.order_id}</div>
                    </div>
                    
                    <div style="margin-bottom:20px; text-align:left;">
                        <label style="display:block; margin-bottom:5px; color:var(--text-muted); font-size:0.9rem;">Transaction ID / UTR (Required)</label>
                        <input type="text" id="txnUtrInput" placeholder="Enter 12-digit UTR No." maxlength="12"
                            style="width:100%; padding:12px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); color:white; border-radius:8px; font-family:monospace; letter-spacing:1px;">
                        <div id="utrError" style="color:#ef4444; font-size:0.8rem; margin-top:5px; display:none;"></div>
                    </div>

                    <button id="verifyBtn" onclick="verifyManualPayment('${orderData.order_id}')" class="btn-primary" style="width:100%; margin-bottom:10px;">
                        VERIFY PAYMENT
                    </button>
                    <button onclick="location.reload()" class="btn-secondary" style="width:100%;">
                        CANCEL
                    </button>
                </div>
            `;
                }

                async function verifyManualPayment(orderId) {
                    const utr = document.getElementById('txnUtrInput').value.trim();
                    const errDiv = document.getElementById('utrError');
                    const btn = document.getElementById('verifyBtn');
                    const email = document.getElementById('userEmail').value;
                    const phone = document.getElementById('userPhone').value;

                    // 1. Strict UTR Validation (Minimum 10 characters)
                    if (!utr || utr.length < 10) {
                        errDiv.style.display = 'block';
                        errDiv.innerText = "Invalid UTR! Please enter a valid Transaction ID (minimum 10 characters).";
                        return;
                    }
                    errDiv.style.display = 'none';

                    // 2. Show Advanced Verification Animation
                    btn.disabled = true;
                    btn.innerHTML = `<span class="pulse-dot"></span> Submitting for verification...`;

                    try {
                        // Call new subscription verify API
                        const response = await fetch('/api/subscription/submit/', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                email: email,
                                phone: phone,
                                plan_type: selectedPlan,
                                utr: utr,
                                amount: selectedAmount.toString()
                            })
                        });

                        const text = await response.text();
                        let result;
                        try {
                            result = JSON.parse(text);
                        } catch (e) {
                            console.warn("Server returned non-JSON response:", text);
                            throw new Error("Server Error: " + (text.length > 50 ? text.substring(0, 50) + "..." : text));
                        }

                        if (response.ok) {
                            // Success - Show waiting for approval message
                            document.getElementById('step2').innerHTML = `
                        <div style="padding:40px; text-align:center;">
                            <div style="font-size:3rem; margin-bottom:20px;">‚è≥</div>
                            <h3 style="margin-bottom:10px; color:#f59e0b;">Waiting for Admin Approval</h3>
                            <p style="color:var(--text-muted); margin-bottom:20px;">Your payment has been submitted successfully!</p>
                            
                            <div style="background:rgba(245,158,11,0.1); border-left:4px solid #f59e0b; padding:20px; border-radius:12px; margin-bottom:20px; text-align:left;">
                                <h4 style="margin:0 0 12px 0; color:#f59e0b; font-size:1rem;">‚ö†Ô∏è Important Notice</h4>
                                <p style="margin:0; color:var(--text-muted); line-height:1.6;">
                                    Your payment is under verification. You will <strong>NOT receive login credentials</strong> until the admin approves your payment.
                                </p>
                            </div>
                            
                            <div style="background:rgba(255,255,255,0.05); padding:20px; border-radius:12px; margin-bottom:20px; text-align:left;">
                                <h4 style="margin:0 0 12px 0; font-size:0.9rem; color:var(--text-muted);">Payment Details Submitted:</h4>
                                <div style="display:grid; gap:8px;">
                                    <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.05);">
                                        <span style="color:var(--text-muted);">UTR Number:</span>
                                        <strong style="font-family:monospace;">${utr}</strong>
                                    </div>
                                    <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.05);">
                                        <span style="color:var(--text-muted);">Amount Paid:</span>
                                        <strong>‚Çπ${selectedAmount.toLocaleString('en-IN')}</strong>
                                    </div>
                                    <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.05);">
                                        <span style="color:var(--text-muted);">Plan Selected:</span>
                                        <strong>${selectedPlan}</strong>
                                    </div>
                                    <div style="display:flex; justify-content:space-between; padding:8px 0;">
                                        <span style="color:var(--text-muted);">Email Address:</span>
                                        <strong>${email}</strong>
                                    </div>
                                </div>
                            </div>

                            <div style="background:rgba(16,185,129,0.1); border-left:4px solid #10b981; padding:16px; border-radius:8px; margin-bottom:20px; text-align:left;">
                                <h4 style="margin:0 0 8px 0; color:#10b981; font-size:1rem;">üìã What Happens Next?</h4>
                                <ol style="margin:0; padding-left:20px; color:var(--text-muted); line-height:1.8;">
                                    <li><strong>Admin Verification</strong> - Super admin will verify your payment with bank statement</li>
                                    <li><strong>Approval Process</strong> - Usually takes 1-2 hours during business hours</li>
                                    <li><strong>Email Notification</strong> - Once approved, you'll receive an email at <strong>${email}</strong></li>
                                    <li><strong>Login Credentials</strong> - Email will contain your username, password, and ${selectedPlan} plan access</li>
                                    <li><strong>Account Activation</strong> - You can then login and start using the system</li>
                                </ol>
                            </div>

                            <div style="background:rgba(99,102,241,0.1); border:1px solid rgba(99,102,241,0.3); padding:16px; border-radius:8px; margin-bottom:20px;">
                                <p style="margin:0; color:var(--text-muted); font-size:0.9rem; line-height:1.6;">
                                    <strong style="color:#6366f1;">üìß Check Your Email:</strong> Keep an eye on your inbox (and spam folder). 
                                    Your credentials will be sent automatically once the admin approves your payment.
                                </p>
                            </div>

                            <button onclick="location.href='/'" class="btn-primary" style="width:100%; margin-bottom:10px;">Back to Home</button>
                            <button onclick="location.href='/login/'" class="btn-secondary" style="width:100%;">Go to Login Page</button>
                        </div>
                    `;
                        } else {
                            // Error
                            errDiv.style.display = 'block';
                            errDiv.innerText = result.error || result.message || "Verification failed. Please try again.";
                            btn.disabled = false;
                            btn.innerHTML = "VERIFY PAYMENT";
                        }

                    } catch (error) {
                        console.error(error);
                        errDiv.style.display = 'block';
                        errDiv.innerText = error.message || "Network error. Please check your connection.";
                        btn.disabled = false;
                        btn.innerHTML = "VERIFY PAYMENT";
                    }
                }

                async function verifyAndOnboard(paymentResponse) {
                    const email = document.getElementById('userEmail').value;
                    const phone = document.getElementById('userPhone').value;

                    // Show processing UI (reuse step2 container for feedback)
                    document.getElementById('step1').style.display = 'none';
                    document.getElementById('step2').style.display = 'block';
                    document.getElementById('step2').innerHTML = `
                <div style="padding:40px; text-align:center;">
                    <div style="font-size:3rem; margin-bottom:20px;">üéâ</div>
                    <h3 style="margin-bottom:10px;">Payment Successful!</h3>
                    <p style="color:var(--text-muted); margin-bottom:20px;">Transaction ID: ${paymentResponse.razorpay_payment_id}</p>
                    <div style="color:var(--primary); font-weight:bold;">
                        <span class="pulse-dot"></span> Creating your Account...
                    </div>
                </div>
             `;

                    // Determine plan type
                    let planTypeEnum = 'SCHOOL';
                    if (selectedPlan.toLowerCase().includes('coaching')) planTypeEnum = 'COACHING';
                    if (selectedPlan.toLowerCase().includes('institute')) planTypeEnum = 'INSTITUTE';

                    // Call Onboarding API
                    try {
                        const response = await fetch('/api/onboarding/pay/', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                email: email,
                                phone: phone,
                                plan_type: planTypeEnum,
                                amount: selectedAmount,
                                // Pass payment details for backend to verify if implemented
                                razorpay_payment_id: paymentResponse.razorpay_payment_id,
                                razorpay_order_id: paymentResponse.razorpay_order_id,
                                razorpay_signature: paymentResponse.razorpay_signature
                            })
                        });

                        const data = await response.json();

                        if (response.ok) {
                            // DISPLAY CREDENTIALS TO USER ON SCREEN
                            const creds = data.display_credentials;

                            // SAVE TOKENS FOR AUTO LOGIN
                            if (data.tokens) {
                                localStorage.setItem('accessToken', data.tokens.access);
                                localStorage.setItem('refreshToken', data.tokens.refresh);
                                console.log("Auto Login Tokens Saved");
                            }

                            document.getElementById('step2').innerHTML = `
                        <div style="padding:20px; text-align:center;">
                            <div style="font-size:3rem; margin-bottom:10px;">‚úÖ</div>
                            <h3 style="margin-bottom:10px; color:#10b981;">Account Activated!</h3>
                            
                            <div style="background:rgba(255,255,255,0.1); padding:20px; border-radius:15px; margin:20px 0; border:1px solid #10b981;">
                                <div style="color:#aaa; font-size:0.9rem;">Your Credentials</div>
                                <div style="font-size:1.2rem; margin:10px 0; font-family:monospace;">
                                    ID: <span style="color:white; font-weight:bold;">${creds.username}</span><br>
                                    PASS: <span style="color:white; font-weight:bold;">${creds.password}</span>
                                </div>
                                <div style="color:#aaa; font-size:0.8rem;">(Also sent to Email & WhatsApp)</div>
                            </div>

                            <button onclick="window.location.href='${data.redirect_url}'" class="btn-primary" style="width:100%; background:#10b981; border:none;">
                                Go to Dashboard (Auto Login) üöÄ
                            </button>
                        </div>
                    `;

                        } else {
                            document.getElementById('step2').innerHTML = `<p style="color:red">Account Creation Failed: ${data.error}</p>`;
                        }
                    } catch (e) {
                        document.getElementById('step2').innerHTML = `<p style="color:red">Server Error: ${e.message}</p>`;
                    }
                }
            </script>

            <!-- Three.js Particle System -->
            <script>
                const canvas = document.getElementById('bg-canvas');
                if (canvas) {
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });

                    renderer.setSize(window.innerWidth, window.innerHeight);
                    camera.position.z = 5;

                    // Create particles
                    const particlesGeometry = new THREE.BufferGeometry();
                    const particlesCount = 2000;
                    const posArray = new Float32Array(particlesCount * 3);

                    for (let i = 0; i < particlesCount * 3; i++) {
                        posArray[i] = (Math.random() - 0.5) * 15;
                    }

                    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

                    const particlesMaterial = new THREE.PointsMaterial({
                        size: 0.01,
                        color: 0x6366f1,
                        transparent: true,
                        opacity: 0.6
                    });

                    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                    scene.add(particlesMesh);

                    // Animation
                    function animate() {
                        requestAnimationFrame(animate);
                        particlesMesh.rotation.y += 0.0005;
                        particlesMesh.rotation.x += 0.0002;
                        renderer.render(scene, camera);
                    }

                    animate();

                    // Handle window resize
                    window.addEventListener('resize', () => {
                        camera.aspect = window.innerWidth / window.innerHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(window.innerWidth, window.innerHeight);
                    });
                }
            </script>
            <!-- Scripts -->
            <script>
                // Premium Modal Functions with 3D Animation
                function showPremiumModal(options) {
                    // Remove any existing modal
                    const existing = document.getElementById('premiumModal');
                    if (existing) existing.remove();

                    const modal = document.createElement('div');
                    modal.id = 'premiumModal';
                    modal.innerHTML = `
                <style>
                    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Outfit:wght@400;600;700&display=swap');
                    
                    #premiumModal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.8);
                        backdrop-filter: blur(10px);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 99999;
                        animation: modalFadeIn 0.3s ease;
                    }
                    
                    @keyframes modalFadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    
                    @keyframes modalSlideUp {
                        from {
                            transform: translateY(50px) scale(0.9);
                            opacity: 0;
                        }
                        to {
                            transform: translateY(0) scale(1);
                            opacity: 1;
                        }
                    }
                    
                    .premium-modal-content {
                        background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
                        border: 1px solid rgba(255,255,255,0.1);
                        border-radius: 24px;
                        padding: 40px;
                        max-width: 500px;
                        width: 90%;
                        box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5), 0 0 50px rgba(99,102,241,0.3);
                        animation: modalSlideUp 0.4s cubic-bezier(0.34,1.56,0.64,1);
                        font-family: 'Inter', sans-serif;
                        position: relative;
                        overflow: hidden;
                    }
                    
                    .premium-modal-content::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        height: 200px;
                        background: radial-gradient(circle at 50% 0%, rgba(99,102,241,0.2) 0%, transparent 70%);
                        pointer-events: none;
                    }
                    
                    .modal-title {
                        font-family: 'Outfit', sans-serif;
                        font-size: 1.75rem;
                        font-weight: 700;
                        margin-bottom: 16px;
                        color: #fff;
                        text-align: center;
                        position: relative;
                        z-index: 1;
                    }
                    
                    .modal-message {
                        font-size: 1.05rem;
                        line-height: 1.7;
                        color: #cbd5e1;
                        margin-bottom: 32px;
                        text-align: center;
                        position: relative;
                        z-index: 1;
                    }
                    
                    .modal-buttons {
                        display: flex;
                        gap: 12px;
                        justify-content: center;
                        position: relative;
                        z-index: 1;
                    }
                    
                    .modal-buttons button {
                        padding: 14px 28px;
                        border-radius: 12px;
                        font-weight: 600;
                        font-size: 1rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        border: none;
                        font-family: 'Inter', sans-serif;
                    }
                    
                    .modal-buttons .btn-primary {
                        background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
                        color: white;
                        box-shadow: 0 4px 15px rgba(99,102,241,0.4);
                    }
                    
                    .modal-buttons .btn-primary:hover {
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(99,102,241,0.6);
                    }
                    
                    .modal-buttons .btn-secondary {
                        background: rgba(255,255,255,0.1);
                        color: #cbd5e1;
                        border: 1px solid rgba(255,255,255,0.2);
                    }
                    
                    .modal-buttons .btn-secondary:hover {
                        background: rgba(255,255,255,0.15);
                        border-color: rgba(255,255,255,0.3);
                    }
                    
                    @media (max-width: 600px) {
                        .premium-modal-content {
                            padding: 30px 20px;
                        }
                        
                        .modal-title {
                            font-size: 1.5rem;
                        }
                        
                        .modal-buttons {
                            flex-direction: column;
                        }
                        
                        .modal-buttons button {
                            width: 100%;
                        }
                    }
                </style>
                
                <div class="premium-modal-content">
                    <h2 class="modal-title">${options.title}</h2>
                    <p class="modal-message">${options.message}</p>
                    <div class="modal-buttons">
                        ${options.buttons.map((btn, idx) => `
                            <button class="${btn.class}" onclick="premiumModalActions[${idx}]()">${btn.text}</button>
                        `).join('')}
                    </div>
                </div>
            `;

                    // Store button actions globally
                    window.premiumModalActions = options.buttons.map(btn => btn.action);

                    document.body.appendChild(modal);
                }

                function closePremiumModal() {
                    const modal = document.getElementById('premiumModal');
                    if (modal) {
                        modal.style.animation = 'modalFadeIn 0.2s ease reverse';
                        setTimeout(() => modal.remove(), 200);
                    }
                }
            </script>
            <!-- Smooth Scroll Handler -->
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                        anchor.addEventListener('click', function (e) {
                            e.preventDefault();
                            const targetId = this.getAttribute('href');
                            if (targetId === '#') return;
                            if (window.lenis) {
                                window.lenis.scrollTo(targetId);
                            } else {
                                const target = document.querySelector(targetId);
                                if (target) target.scrollIntoView({ behavior: 'smooth' });
                            }
                        });
                    });
                });
            </script>
            <!-- Premium Motion JS -->
            <script src="{% static 'js/premium_motion.js' %}"></script>

            <script src="{% static 'js/premium_modal.js' %}"></script>
        </div>
    </div>
</body>

</html>